extends layout

block content
  h1 My Quizzes
  
  a(href='/instructor/quizzes/new') + Create New Quiz
  
  if quizzes && quizzes.length > 0
    table
      thead
        tr
          th Title
          th Description
          th Status
          th Time Limit
          th Created
          th Actions
      tbody
        each quiz in quizzes
          tr
            td= quiz.title
            td= quiz.description || 'N/A'
            td
              span(class=quiz.is_published ? 'badge published' : 'badge draft')= quiz.is_published ? 'Published' : 'Draft'
            td= quiz.time_limit ? quiz.time_limit + ' min' : 'No limit'
            td= new Date(quiz.created_at).toLocaleDateString()
            td
              a(href=`/instructor/quizzes/${quiz.id}/questions`) Manage Questions
              | &nbsp;|&nbsp;
              a(href=`/instructor/quizzes/${quiz.id}/results`) View Results
              | &nbsp;|&nbsp;
              form(method='POST', action=`/instructor/quizzes/${quiz.id}/toggle-publish`, style='display:inline')
                button(type='submit', class=quiz.is_published ? 'btn-unpublish' : 'btn-publish')= quiz.is_published ? 'Unpublish' : 'Publish'
              | &nbsp;|&nbsp;
              form(method='POST', action=`/instructor/quizzes/${quiz.id}/delete`, style='display:inline', onsubmit='return confirm("Are you sure you want to delete this quiz? This cannot be undone.")')
                button(type='submit', class='btn-delete') Delete
  else
    p No quizzes yet. Create your first quiz!

  style.
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #f8f9fa;
      font-weight: bold;
    }
    .badge {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.85em;
      font-weight: bold;
    }
    .badge.published {
      background-color: #28a745;
      color: white;
    }
    .badge.draft {
      background-color: #6c757d;
      color: white;
    }
    .btn-publish {
      background-color: #28a745;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-unpublish {
      background-color: #dc3545;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-delete {
      background-color: #dc3545;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn-delete:hover {
      background-color: #c82333;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
