extends layout

block content
  .page-container
    //- Header avec titre et badge
    .quiz-header
      .quiz-title-section
        h1 üìù #{quiz.title}
        p.quiz-description= quiz.description
        .quiz-meta-info
          span.meta-label Status: 
          span(class=quiz.is_published ? 'badge badge-published' : 'badge badge-draft')= quiz.is_published ? 'Published' : 'Draft'
          if quiz.time_limit
            span.meta-separator ‚Ä¢
            span.meta-label Time Limit: 
            span.meta-value #{quiz.time_limit} min
    
    //- Liste des questions existantes
    .questions-section
      .section-header
        h2 üìö Questions List
        if questions && questions.length > 0
          span.question-count #{questions.length} question(s)
      
      if questions && questions.length > 0
        .questions-list
          each q, index in questions
            .question-card
              .question-header
                span.question-number ##{index + 1}
                span.question-points #{q.points || 1} pt(s)
              
              .question-body
                p.question-text= q.question_text
                
                .options-grid
                  .option-item(class=q.correct_option === 'A' ? 'correct-answer' : '')
                    span.option-letter A
                    span.option-text= q.option_a
                    if q.correct_option === 'A'
                      span.correct-icon ‚úì
                  
                  .option-item(class=q.correct_option === 'B' ? 'correct-answer' : '')
                    span.option-letter B
                    span.option-text= q.option_b
                    if q.correct_option === 'B'
                      span.correct-icon ‚úì
                  
                  .option-item(class=q.correct_option === 'C' ? 'correct-answer' : '')
                    span.option-letter C
                    span.option-text= q.option_c
                    if q.correct_option === 'C'
                      span.correct-icon ‚úì
                  
                  .option-item(class=q.correct_option === 'D' ? 'correct-answer' : '')
                    span.option-letter D
                    span.option-text= q.option_d
                    if q.correct_option === 'D'
                      span.correct-icon ‚úì
      else
        .empty-state-questions
          .empty-icon üì≠
          h3 No Questions Yet
          p Start by adding your first question below
    
    //- Formulaire d'ajout de question
    .add-question-section
      .section-header
        h2 ‚ûï Add New Question
      
      form.question-form(method='POST', action=`/instructor/quizzes/${quiz.id}/questions`)
        .form-row
          .form-group.full-width
            label(for='question_text') 
              span.label-icon üìù
              | Question Text
            textarea(name='question_text', id='question_text', required, rows='4', placeholder='Enter your question here...')
        
        .form-row.options-row
          .form-group
            label(for='option_a') 
              span.option-badge A
              | Option A
            input(type='text', name='option_a', id='option_a', required, placeholder='First option')
          
          .form-group
            label(for='option_b') 
              span.option-badge B
              | Option B
            input(type='text', name='option_b', id='option_b', required, placeholder='Second option')
        
        .form-row.options-row
          .form-group
            label(for='option_c') 
              span.option-badge C
              | Option C
            input(type='text', name='option_c', id='option_c', required, placeholder='Third option')
          
          .form-group
            label(for='option_d') 
              span.option-badge D
              | Option D
            input(type='text', name='option_d', id='option_d', required, placeholder='Fourth option')
        
        .form-row
          .form-group
            label(for='correct_option') 
              span.label-icon ‚úì
              | Correct Answer
            select(name='correct_option', id='correct_option', required)
              option(value='', disabled, selected) Select the correct option
              option(value='A') A - Option A
              option(value='B') B - Option B
              option(value='C') C - Option C
              option(value='D') D - Option D
          
          .form-group
            label(for='points') 
              span.label-icon ‚≠ê
              | Points
            input(type='number', name='points', id='points', min='1', value='1', required)
        
        .form-actions
          button.btn.btn-primary(type='submit') 
            span ‚ûï 
            | Add Question
          a.btn.btn-secondary(href='/instructor/quizzes') 
            span ‚Üê 
            | Back to Quizzes
